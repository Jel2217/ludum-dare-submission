[gd_scene load_steps=11 format=2]

[ext_resource path="res://Images/White.png" type="Texture" id=1]
[ext_resource path="res://Other Resources/Glitch_Shaders/Normalised.shader" type="Shader" id=2]
[ext_resource path="res://Other Resources/Glitch_Shaders/Waves.shader" type="Shader" id=3]
[ext_resource path="res://Scripts/GlitchFX.gd" type="Script" id=4]
[ext_resource path="res://Other Resources/Glitch_Shaders/Inverted.shader" type="Shader" id=5]

[sub_resource type="ShaderMaterial" id=1]
shader = ExtResource( 5 )

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;

uniform float rotation = 0.0;

void fragment() {
	vec2 uv = SCREEN_UV;
	vec2 rel = uv - vec2(0.5, 0.5);
	float angle = length(rel) * rotation;
	mat2 rot = mat2(vec2(cos(angle), -sin(angle)), vec2(sin(angle), cos(angle)));
	rel = rot * rel;
	uv = clamp(rel + vec2(0.5,0.5), vec2(0.0, 0.0), vec2(1.0, 1.0));
	COLOR.rgb = textureLod(SCREEN_TEXTURE, uv, 0.0).rgb;
}
"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/rotation = 0.5

[sub_resource type="ShaderMaterial" id=4]
shader = ExtResource( 2 )

[sub_resource type="ShaderMaterial" id=5]
shader = ExtResource( 3 )
shader_param/frequency = 60.0
shader_param/depth = 0.005

[node name="Glitches" type="Control"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Invert" type="TextureRect" parent="."]
visible = false
material = SubResource( 1 )
margin_left = -32000.0
margin_top = -18000.0
margin_right = 32000.0
margin_bottom = 18000.0
rect_min_size = Vector2( 640, 360 )
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Wirl" type="TextureRect" parent="."]
visible = false
material = SubResource( 3 )
margin_left = -32000.0
margin_top = -18000.0
margin_right = 32000.0
margin_bottom = 18000.0
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Normalised" type="TextureRect" parent="."]
visible = false
material = SubResource( 4 )
margin_left = -32000.0
margin_top = -18000.0
margin_right = 32000.0
margin_bottom = 18000.0
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Deep Fried" type="TextureRect" parent="."]
visible = false
material = SubResource( 3 )
margin_left = -32000.0
margin_top = -18000.0
margin_right = 32000.0
margin_bottom = 18000.0
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Wave" type="TextureRect" parent="."]
visible = false
material = SubResource( 5 )
margin_left = 32000.0
margin_top = 18000.0
margin_right = 96000.0
margin_bottom = 54000.0
texture = ExtResource( 1 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}
